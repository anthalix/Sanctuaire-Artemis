{% extends 'admin/admin.html.twig' %}

{% block title %}Tous les Animaux!
{% endblock %}

{% block body %}
	<style>
		/* Espace entre les lignes */
		.table {
			border-spacing: 0 10px;
			border-collapse: separate;
		}

		/* Fond, arrondi et ombre des lignes */
		.table tr {
			background-color: #fff;
			overflow: hidden;
			transition: all 0.2s ease;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.88);
			height:50px;
		}

		/* Effet au survol : ombre un peu plus marquée */
		.table tr:hover {
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.88);
		}
	

		

		/* Suppression des bordures internes */
	

		/* Padding dans les cellules pour plus de lisibilité */
		.table td,
		.table th {
			border : none;
			padding: 10px 15px;
		
		}
		img {
			width: 40px;
			height: 40px;
		}
	</style>
	<h1 style="color:white">Liste des animaux</h1>


	<a href="{{ path('admin.animals.create') }}" class="btn btn-success mb-3">Ajouter un animal</a>
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>{{ knp_pagination_sortable(animals, 'ID', 'a.id')}}</th>
				<th>{{ knp_pagination_sortable(animals, 'Nom', 'a.name')}}</th>
				<th>{{ knp_pagination_sortable(animals, 'Espèce', 's.name')}}</th>
				<th>{{ knp_pagination_sortable(animals, 'Age', 'a.age')}}</th>
				<th>Description</th>
				<th>Image</th>
				<th style='width:120px;' >Race</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{% for animal in animals %}
				<tr>
					<td>{{ animal.id }}</td>
					<td>{{ animal.name | upper }}</td>
					<td>{{ animal.specie.name }}</td>
					<td>{{ animal.age }}</td>
					<td>{{ animal.description }}</td>
					<td><img src=" /animals/images/{{ animal.thumbnail}}"></td>
					<td >
						{% for breed in animal.breeds%}
							{{ breed.name }}
							{% if not loop.last %},
							{% endif %}
						{% endfor %}
					</td>

					<td class="d-flex justify-content-end gap-2">
						<a href="{{ path('admin.animals.edit', {id : animal.id}) }}" class="btn btn-primary">Modifier</a>
						<button class="btn btn-danger" onclick="confirmDelete(this)" data-url="{{ path('admin.animals.delete', {id: animal.id}) }}">
							Supprimer
						</button>
					</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<div class="d-flex justify-content-center">
		{{ knp_pagination_render(animals) }}
	</div>

	<!-- Include SweetAlert2 -->
	 <script>
	  function confirmDelete(button) {
	    const url = button.getAttribute('data-url');
	    Swal.fire({
	      title: "Supprimer l'animal ?",
	      text: "Cette action est irréversible !",
	      icon: 'warning',
	      showCancelButton: true,
	      confirmButtonColor: '#d33',
	      cancelButtonColor: '#aaa',
	      confirmButtonText: 'Oui, supprimer',
	      cancelButtonText: 'Annuler'
	    }).then((result) => {
	      if (result.isConfirmed) {
	        window.location.href = url;
	      }
	    });
	  }
	</script>


{% endblock %}
